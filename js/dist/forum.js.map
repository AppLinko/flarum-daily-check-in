{"version":3,"file":"forum.js","mappings":"MACA,IAAIA,EAAsB,CCA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,GCLRF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,MCJ3ER,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,GCClFf,EAAyBM,IACH,oBAAXa,QAA0BA,OAAOC,aAC1CV,OAAOC,eAAeL,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DX,OAAOC,eAAeL,EAAS,aAAc,CAAEe,OAAO,M,+BCLvD,MAAM,EAA+BC,OAAOC,KAAKC,OAAe,OCA1D,EAA+BF,OAAOC,KAAKC,OAAO,8B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,qB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,2B,aCAzC,SAASC,EAAgBhB,EAAGiB,GAMzC,OALAD,EAAkBf,OAAOiB,gBAAkB,SAAyBlB,EAAGiB,GAErE,OADAjB,EAAEmB,UAAYF,EACPjB,GAGFgB,EAAgBhB,EAAGiB,GCN5B,MAAM,EAA+BJ,OAAOC,KAAKC,OAAO,oB,aCAnBF,OAAOC,KAAKC,OAAO,gB,ICInCK,EAAAA,SAAAA,GCHN,IAAwBC,EAAUC,E,kDAAAA,E,GAAVD,E,GAC5Bd,UAAYN,OAAOsB,OAAOD,EAAWf,WAC9Cc,EAASd,UAAUiB,YAAcH,EACjCH,EAAeG,EAAUC,G,2BDCzBG,OAAA,SAAOC,GACL,YAAMD,OAAN,UAAaC,I,EAGfC,UAAA,WACE,MAAO,oC,EAGTC,MAAA,WACE,OAAQ,SAAKD,UAAU,wCAAwCE,IAAIC,WAAWC,MAAM,0C,EAGtFC,QAAA,WACE,IAAMC,EAAyBJ,IAAIK,QAAQC,KAAKC,UAAU,0BACpDC,EAAgCR,IAAIS,MAAMF,UAAU,iCACpDG,EAAsCV,IAAIS,MAAMF,UAAU,uCAC1DI,EAAyBX,IAAIS,MAAMF,UAAU,0BAI/CK,EAAa,GACbC,EAAuB,+BACvBC,EAAsB,+BAY1B,MAVmC,KAAhCN,IACDK,EAAuB,oCAGA,SAXsDE,IAAnDf,IAAIS,MAAMF,UAAU,+BAWuB,KAAtCG,IAE/BE,GADYZ,IAAIS,MAAMF,UAAU,8BAAgC,WACzCS,QAAQ,UAAWL,GAC1CG,EAAsB,kCAItB,SAAKhB,UAAU,cACb,SAAKA,UAAWe,GAAuBL,EAA8BQ,QAAQ,SAAUZ,IACvF,SAAKN,UAAWgB,GAAsBJ,EAAoCM,QAAQ,WAAYJ,M,EAtCjFrB,CAA4B0B,KEEjDjB,IAAIkB,aAAaC,IAAI,iBAAiB,YACpCC,EAAAA,EAAAA,QAAOC,IAAAA,UAAqB,gBAAgB,SAASC,GACnD,GAAsB,OAAnBtB,IAAIK,QAAQC,KAAY,CACzB,IASIiB,EATEC,EAAYxB,IAAIyB,QAAQlD,IAAI,aAE5B6B,EAAyBJ,IAAIK,QAAQC,KAAKC,UAAU,0BACpDmB,EAAa1B,IAAIK,QAAQC,KAAKC,UAAU,cACxCoB,EAAuB3B,IAAIK,QAAQC,KAAKC,UAAU,wBAElDqB,GADa5B,IAAIK,QAAQC,KAAKC,UAAU,cACRP,IAAIS,MAAMF,UAAU,kCACtDsB,EAA8B7B,IAAIK,QAAQC,KAAKC,UAAU,+BAGzDuB,GAFkB9B,IAAIK,QAAQC,KAAKC,UAAU,mBAElC,iBAQf,GANe,QAAZiB,IAC4D,IAA1DK,EAA4BE,QAAQ,qBACnCD,EAAW,oBAID,IAAbJ,EAAkB,CACnBH,EAAoBvB,IAAIC,WAAWC,MAAM,gCACzCoB,EAAMH,IAAIW,EAAUE,IAAAA,UAAiB,CACnCC,KAAM,kBACNnC,UAAW,+BACXoC,cAAe,qBACfC,GAAG,gBACHC,QAAS,WACPpC,IAAIK,QAAQC,KAAK+B,KAAK,CAACX,YAAW,EAAMtB,wBAA8C,IAAvBuB,EAA4BvB,EAAuB,EAAE,IAEpH,IAAMI,EAAgCR,IAAIS,MAAMF,UAAU,iCACpDG,EAAsCV,IAAIS,MAAMF,UAAU,uCAEhE,GAAmC,KAAhCC,GAA4E,KAAtCE,EACvC,GAAmC,IAAhCkB,EAAkC,CACnC,IAAMjB,EAAyBX,IAAIS,MAAMF,UAAU,0BAC7C+B,OAAyEvB,IAAnDf,IAAIS,MAAMF,UAAU,6BAG5CK,EAAa,GAEjB,GAAmC,KAAhCJ,EACD,KAAM+B,EAAqB/B,EAA8BQ,QAAQ,SAAUZ,GAC/CJ,IAAIwC,OAAOC,KAAKC,IAAO,CAAEC,KAAM,WAAaJ,GAG1E,IAAyB,IAAtBD,GAAoE,KAAtC5B,EAAyC,CAExEE,GADYZ,IAAIS,MAAMF,UAAU,8BAAgC,WACzCS,QAAQ,UAAWL,GAE1C,IAAMiC,EAA2BlC,EAAoCM,QAAQ,WAAYJ,GACvDZ,IAAIwC,OAAOC,KAAKC,IAAO,CAAEC,KAAM,WAAaC,SAGzC,IAAhChB,GACP5B,IAAI6C,MAAMJ,KAAKlD,KAIpBgC,GAAmB,IAEtB,IAAMuB,EAAmB9C,IAAIS,MAAMF,UAAU,oBACvCwC,EAAwB/C,IAAIS,MAAMF,UAAU,yBAE5B,IAAnBuC,GACDE,YAAW,WACTC,EAAE,kBAAkBC,UACpBH,QAGJxB,EAAoBnB,GAAwB,EAAEJ,IAAIC,WAAWC,MAAM,qCAAsC,CAACiD,MAAO/C,IAAyBJ,IAAIC,WAAWC,MAAM,sCAAuC,CAACiD,MAAO/C,IAC9MkB,EAAMH,IAAIW,EAAUE,IAAAA,UAAiB,CACnCC,KAAM,wBACNnC,UAAW,8BACXoC,cAAe,qBACfkB,UAAU,GACT7B,GAAmB,Y","sources":["webpack://@ziiven/flarum-daily-check-in/webpack/bootstrap","webpack://@ziiven/flarum-daily-check-in/webpack/runtime/compat get default export","webpack://@ziiven/flarum-daily-check-in/webpack/runtime/define property getters","webpack://@ziiven/flarum-daily-check-in/webpack/runtime/hasOwnProperty shorthand","webpack://@ziiven/flarum-daily-check-in/webpack/runtime/make namespace object","webpack://@ziiven/flarum-daily-check-in/external root \"flarum.core.compat['extend']\"","webpack://@ziiven/flarum-daily-check-in/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@ziiven/flarum-daily-check-in/external root \"flarum.core.compat['components/Button']\"","webpack://@ziiven/flarum-daily-check-in/external root \"flarum.core.compat['common/components/Alert']\"","webpack://@ziiven/flarum-daily-check-in/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@ziiven/flarum-daily-check-in/external root \"flarum.core.compat['components/Modal']\"","webpack://@ziiven/flarum-daily-check-in/external root \"flarum.core.compat['utils/Stream']\"","webpack://@ziiven/flarum-daily-check-in/./src/forum/components/checkInSuccessModal.js","webpack://@ziiven/flarum-daily-check-in/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@ziiven/flarum-daily-check-in/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Alert'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/Stream'];","import Modal from 'flarum/components/Modal';\nimport Button from 'flarum/components/Button';\nimport Stream from 'flarum/utils/Stream';\n\nexport default class checkInSuccessModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n  }\n\n  className() {\n    return 'checkInSuccessModal Modal--small';\n  }\n\n  title() {\n    return (<div className=\"checkInSuccessModal successTitleText\">{app.translator.trans('ziven-checkin.forum.check-in-success')}</div>);\n  }\n\n  content() {\n    const totalContinuousCheckIn = app.session.user.attribute(\"totalContinuousCheckIn\");\n    const forumCheckinSuccessPromptText = app.forum.attribute(\"forumCheckinSuccessPromptText\");\n    const forumCheckinSuccessPromptRewardText = app.forum.attribute(\"forumCheckinSuccessPromptRewardText\");\n    const forumCheckinRewarMoney = app.forum.attribute(\"forumCheckinRewarMoney\");\n    const moneyExtensionExist = app.forum.attribute('antoinefr-money.moneyname')!==undefined;\n\n    let moneyName = \"\";\n    let rewardText = \"\";\n    let successTextClassName = \"checkInSuccessModal hideText\";\n    let rewardTextClassName = \"checkInSuccessModal hideText\";\n\n    if(forumCheckinSuccessPromptText!==\"\"){\n      successTextClassName = \"checkInSuccessModal successText\";\n    }\n\n    if(moneyExtensionExist===true && forumCheckinSuccessPromptRewardText!==\"\"){\n      moneyName = app.forum.attribute('antoinefr-money.moneyname') || '[money]';\n      rewardText = moneyName.replace('[money]', forumCheckinRewarMoney);\n      rewardTextClassName = \"checkInSuccessModal rewardText\";\n    }\n\n    return (\n      <div className=\"Modal-body\">\n        <div className={successTextClassName}>{forumCheckinSuccessPromptText.replace('[days]', totalContinuousCheckIn)}</div>\n        <div className={rewardTextClassName}>{forumCheckinSuccessPromptRewardText.replace('[reward]', rewardText)}</div>\n      </div>\n    );\n  }\n}\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","import { extend } from 'flarum/extend';\r\nimport IndexPage from 'flarum/forum/components/IndexPage';\r\nimport Button from 'flarum/components/Button';\r\nimport Alert from 'flarum/common/components/Alert';\r\nimport checkInSuccessModal from './components/checkInSuccessModal';\r\n\r\napp.initializers.add('ziven-checkin', () => {\r\n  extend(IndexPage.prototype, 'sidebarItems', function(items) {\r\n    if(app.session.user!==null){\r\n      const routeName = app.current.get('routeName');\r\n\r\n      const totalContinuousCheckIn = app.session.user.attribute(\"totalContinuousCheckIn\");\r\n      const canCheckin = app.session.user.attribute(\"canCheckin\");\r\n      const canCheckinContinuous = app.session.user.attribute(\"canCheckinContinuous\");\r\n      const serverData = app.session.user.attribute(\"serverDate\");\r\n      const forumCheckinSuccessPromptType = app.forum.attribute(\"forumCheckinSuccessPromptType\");\r\n      let checkInCompatibleExtensions = app.session.user.attribute(\"checkInCompatibleExtensions\");\r\n      let lastCheckinTime = app.session.user.attribute(\"lastCheckinTime\");\r\n      let checkinButtonText;\r\n      let itemName = \"forum-checkin\";\r\n\r\n      if(routeName===\"tag\"){\r\n        if(checkInCompatibleExtensions.indexOf(\"fof-follow-tags\")!==-1){\r\n            itemName = \"forum-checkin-1\";\r\n        }\r\n      }\r\n\r\n      if(canCheckin===true){\r\n        checkinButtonText = app.translator.trans('ziven-checkin.forum.check-in');\r\n        items.add(itemName, Button.component({\r\n          icon: 'fas fa-calendar',\r\n          className: 'Button CheckInButton--yellow',\r\n          itemClassName: 'App-primaryControl',\r\n          id:\"checkInButton\",\r\n          onclick: () => {\r\n            app.session.user.save({canCheckin:false,totalContinuousCheckIn:canCheckinContinuous===true?totalContinuousCheckIn+1:1});\r\n\r\n            const forumCheckinSuccessPromptText = app.forum.attribute(\"forumCheckinSuccessPromptText\");\r\n            const forumCheckinSuccessPromptRewardText = app.forum.attribute(\"forumCheckinSuccessPromptRewardText\");\r\n\r\n            if(forumCheckinSuccessPromptText!==\"\" || forumCheckinSuccessPromptRewardText!==\"\"){\r\n              if(forumCheckinSuccessPromptType===1){\r\n                const forumCheckinRewarMoney = app.forum.attribute(\"forumCheckinRewarMoney\");\r\n                const moneyExtensionExist = app.forum.attribute('antoinefr-money.moneyname')!==undefined;\r\n\r\n                let moneyName = \"\";\r\n                let rewardText = \"\";\r\n\r\n                if(forumCheckinSuccessPromptText!==\"\"){\r\n                  const checkInSuccessText = forumCheckinSuccessPromptText.replace('[days]', totalContinuousCheckIn);\r\n                  const successTextAlertKey = app.alerts.show(Alert, { type: 'success' }, checkInSuccessText);\r\n                }\r\n\r\n                if(moneyExtensionExist===true && forumCheckinSuccessPromptRewardText!==\"\"){\r\n                  moneyName = app.forum.attribute('antoinefr-money.moneyname') || '[money]';\r\n                  rewardText = moneyName.replace('[money]', forumCheckinRewarMoney);\r\n\r\n                  const checkInSuccessRewardText = forumCheckinSuccessPromptRewardText.replace('[reward]', rewardText);\r\n                  const successRewardTextAlertKey = app.alerts.show(Alert, { type: 'success' }, checkInSuccessRewardText);\r\n                }\r\n\r\n              }else if(forumCheckinSuccessPromptType===2){\r\n                app.modal.show(checkInSuccessModal);\r\n              }\r\n            }\r\n          }\r\n        }, checkinButtonText),50);\r\n\r\n        const forumAutoCheckIn = app.forum.attribute(\"forumAutoCheckin\");\r\n        const forumAutoCheckInDelay = app.forum.attribute(\"forumAutoCheckinDelay\");\r\n\r\n        if(forumAutoCheckIn===1){\r\n          setTimeout(function(){\r\n            $(\"#checkInButton\").click();\r\n          },forumAutoCheckInDelay);\r\n        }\r\n      }else{\r\n        checkinButtonText = totalContinuousCheckIn<=1?app.translator.trans('ziven-checkin.forum.checked-in-day', {count: totalContinuousCheckIn}):app.translator.trans('ziven-checkin.forum.checked-in-days', {count: totalContinuousCheckIn});\r\n        items.add(itemName, Button.component({\r\n          icon: 'fas fa-calendar-check',\r\n          className: 'Button CheckInButton--green',\r\n          itemClassName: 'App-primaryControl',\r\n          disabled: true\r\n        }, checkinButtonText),50);\r\n      }\r\n    }\r\n  });\r\n});"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","__proto__","checkInSuccessModal","subClass","superClass","create","constructor","oninit","vnode","className","title","app","translator","trans","content","totalContinuousCheckIn","session","user","attribute","forumCheckinSuccessPromptText","forum","forumCheckinSuccessPromptRewardText","forumCheckinRewarMoney","rewardText","successTextClassName","rewardTextClassName","undefined","replace","Modal","initializers","add","extend","IndexPage","items","checkinButtonText","routeName","current","canCheckin","canCheckinContinuous","forumCheckinSuccessPromptType","checkInCompatibleExtensions","itemName","indexOf","Button","icon","itemClassName","id","onclick","save","moneyExtensionExist","checkInSuccessText","alerts","show","Alert","type","checkInSuccessRewardText","modal","forumAutoCheckIn","forumAutoCheckInDelay","setTimeout","$","click","count","disabled"],"sourceRoot":""}