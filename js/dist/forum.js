(()=>{var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t);const o=flarum.core.compat.extend,n=flarum.core.compat["forum/components/IndexPage"];var a=e.n(n);const r=flarum.core.compat["components/Button"];var c=e.n(r);const s=flarum.core.compat["common/components/Alert"];var u=e.n(s);function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}const p=flarum.core.compat["components/Modal"];var l=e.n(p);flarum.core.compat["utils/Stream"];var f=function(e){var t,o;function n(){return e.apply(this,arguments)||this}o=e,(t=n).prototype=Object.create(o.prototype),t.prototype.constructor=t,i(t,o);var a=n.prototype;return a.oninit=function(t){e.prototype.oninit.call(this,t)},a.className=function(){return"checkInSuccessModal Modal--small"},a.title=function(){return m("div",{className:"checkInSuccessModal successTitleText"},app.translator.trans("ziven-checkin.forum.check-in-success"))},a.content=function(){var e=app.session.user.attribute("totalContinuousCheckIn"),t=app.forum.attribute("forumCheckinSuccessPromptText"),o=app.forum.attribute("forumCheckinSuccessPromptRewardText"),n=app.forum.attribute("forumCheckinRewarMoney"),a=void 0!==app.forum.attribute("antoinefr-money.moneyname");console.log("forumCheckinRewarMoney",n);var r="",c="checkInSuccessModal hideText",s="checkInSuccessModal hideText";return""!==t&&(c="checkInSuccessModal successText"),!0===a&&""!==o&&(r=(app.forum.attribute("antoinefr-money.moneyname")||"[money]").replace("[money]",n),s="checkInSuccessModal rewardText"),m("div",{className:"Modal-body"},m("div",{className:c},t.replace("[days]",e)),m("div",{className:s},o.replace("[reward]",r)))},n}(l());app.initializers.add("ziven-checkin",(function(){(0,o.extend)(a().prototype,"sidebarItems",(function(e){if(null!==app.session.user){var t,o=app.session.user.attribute("totalContinuousCheckIn"),n=app.session.user.attribute("canCheckin"),a=app.session.user.attribute("canCheckinContinuous"),r=(app.session.user.attribute("serverDate"),app.forum.attribute("forumCheckinSuccessPromptType"));app.session.user.attribute("lastCheckinTime"),!0===n?(t=app.translator.trans("ziven-checkin.forum.check-in"),e.add("forum-checkin",c().component({icon:"fas fa-calendar",className:"Button CheckInButton--yellow",itemClassName:"App-primaryControl",onclick:function(){app.session.user.save({canCheckin:!1,totalContinuousCheckIn:!0===a?o+1:1});var e=app.forum.attribute("forumCheckinSuccessPromptText"),t=app.forum.attribute("forumCheckinSuccessPromptRewardText");if(""!==e||""!==t)if(1===r){var n=app.forum.attribute("forumCheckinRewarMoney"),c=void 0!==app.forum.attribute("antoinefr-money.moneyname"),s="";if(""!==e){var i=e.replace("[days]",o);app.alerts.show(u(),{type:"success"},i)}if(!0===c&&""!==t){s=(app.forum.attribute("antoinefr-money.moneyname")||"[money]").replace("[money]",n);var p=t.replace("[reward]",s);app.alerts.show(u(),{type:"success"},p)}}else 2===r&&app.modal.show(f)}},t),50)):(t=o<=1?app.translator.trans("ziven-checkin.forum.checked-in-day",{count:o}):app.translator.trans("ziven-checkin.forum.checked-in-days",{count:o}),e.add("forum-checkin",c().component({icon:"fas fa-calendar-check",className:"Button CheckInButton--green",itemClassName:"App-primaryControl",disabled:!0},t),50))}}))}))})(),module.exports=t})();
//# sourceMappingURL=forum.js.map