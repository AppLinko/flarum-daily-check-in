(()=>{var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t);const o=flarum.core.compat.extend,n=flarum.core.compat["forum/components/IndexPage"];var a=e.n(n);const r=flarum.core.compat["components/Button"];var c=e.n(r);const s=flarum.core.compat["common/components/Alert"];var u=e.n(s);function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}const p=flarum.core.compat["components/Modal"];var l=e.n(p);flarum.core.compat["utils/Stream"];var f=function(e){var t,o;function n(){return e.apply(this,arguments)||this}o=e,(t=n).prototype=Object.create(o.prototype),t.prototype.constructor=t,i(t,o);var a=n.prototype;return a.oninit=function(t){e.prototype.oninit.call(this,t)},a.className=function(){return"checkInSuccessModal Modal--small"},a.title=function(){return m("div",{className:"checkInSuccessModal successTitleText"},app.translator.trans("ziven-checkin.forum.check-in-success"))},a.content=function(){var e=app.session.user.attribute("totalContinuousCheckIn"),t=app.forum.attribute("forumCheckinSuccessPromptText"),o=app.forum.attribute("forumCheckinSuccessPromptRewardText"),n=app.forum.attribute("forumCheckinRewarMoney"),a="",r="checkInSuccessModal hideText",c="checkInSuccessModal hideText";return""!==t&&(r="checkInSuccessModal successText"),!0==(void 0!==app.forum.attribute("antoinefr-money.moneyname"))&&""!==o&&(a=(app.forum.attribute("antoinefr-money.moneyname")||"[money]").replace("[money]",n),c="checkInSuccessModal rewardText"),m("div",{className:"Modal-body"},m("div",{className:r},t.replace("[days]",e)),m("div",{className:c},o.replace("[reward]",a)))},n}(l());app.initializers.add("ziven-checkin",(function(){(0,o.extend)(a().prototype,"sidebarItems",(function(e){if(null!==app.session.user){var t,o=app.current.get("routeName"),n=app.session.user.attribute("totalContinuousCheckIn"),a=app.session.user.attribute("canCheckin"),r=app.session.user.attribute("canCheckinContinuous"),s=(app.session.user.attribute("serverDate"),app.forum.attribute("forumCheckinSuccessPromptType")),i=app.session.user.attribute("checkInCompatibleExtensions"),p=(app.session.user.attribute("lastCheckinTime"),"forum-checkin");if("tag"===o&&-1!==i.indexOf("fof-follow-tags")&&(p="forum-checkin-1"),!0===a){t=app.translator.trans("ziven-checkin.forum.check-in"),e.add(p,c().component({icon:"fas fa-calendar",className:"Button CheckInButton--yellow",itemClassName:"App-primaryControl",id:"checkInButton",onclick:function(){app.session.user.save({canCheckin:!1,totalContinuousCheckIn:!0===r?n+1:1});var e=app.forum.attribute("forumCheckinSuccessPromptText"),t=app.forum.attribute("forumCheckinSuccessPromptRewardText");if(""!==e||""!==t)if(1===s){var o=app.forum.attribute("forumCheckinRewarMoney"),a=void 0!==app.forum.attribute("antoinefr-money.moneyname"),c="";if(""!==e){var i=e.replace("[days]",n);app.alerts.show(u(),{type:"success"},i)}if(!0===a&&""!==t){c=(app.forum.attribute("antoinefr-money.moneyname")||"[money]").replace("[money]",o);var p=t.replace("[reward]",c);app.alerts.show(u(),{type:"success"},p)}}else 2===s&&app.modal.show(f)}},t),50);var m=app.forum.attribute("forumAutoCheckin"),l=app.forum.attribute("forumAutoCheckinDelay");1===m&&setTimeout((function(){$("#checkInButton").click()}),l)}else t=n<=1?app.translator.trans("ziven-checkin.forum.checked-in-day",{count:n}):app.translator.trans("ziven-checkin.forum.checked-in-days",{count:n}),e.add(p,c().component({icon:"fas fa-calendar-check",className:"Button CheckInButton--green",itemClassName:"App-primaryControl",disabled:!0},t),50)}}))}))})(),module.exports=t})();
//# sourceMappingURL=forum.js.map