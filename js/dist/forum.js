(()=>{var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var a in o)e.o(o,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:o[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t);const o=flarum.core.compat.extend,a=flarum.core.compat["forum/components/IndexPage"];var n=e.n(a);const r=flarum.core.compat["components/Button"];var c=e.n(r);const s=flarum.core.compat["common/components/Alert"];var u=e.n(s);function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}const p=flarum.core.compat["components/Modal"];var l=e.n(p);flarum.core.compat["utils/Stream"];var f=function(e){var t,o;function a(){return e.apply(this,arguments)||this}o=e,(t=a).prototype=Object.create(o.prototype),t.prototype.constructor=t,i(t,o);var n=a.prototype;return n.oninit=function(t){e.prototype.oninit.call(this,t)},n.className=function(){return"checkInSuccessModal Modal--small"},n.title=function(){return m("div",{className:"checkInSuccessModal successTitleText"},app.translator.trans("ziven-checkin.forum.check-in-success"))},n.content=function(){var e=app.session.user.attribute("totalContinuousCheckIn"),t=app.forum.attribute("forumCheckinSuccessPromptText"),o=app.forum.attribute("forumCheckinSuccessPromptRewardText"),a=app.forum.attribute("forumCheckinRewarMoney"),n="",r="checkInSuccessModal hideText",c="checkInSuccessModal hideText";return""!==t&&(r="checkInSuccessModal successText"),!0==(void 0!==app.forum.attribute("antoinefr-money.moneyname"))&&""!==o&&(n=(app.forum.attribute("antoinefr-money.moneyname")||"[money]").replace("[money]",a),c="checkInSuccessModal rewardText"),m("div",{className:"Modal-body"},m("div",{className:r},t.replace("[days]",e)),m("div",{className:c},o.replace("[reward]",n)))},a}(l());app.initializers.add("ziven-checkin",(function(){(0,o.extend)(n().prototype,"sidebarItems",(function(e){if(null!==app.session.user&&!0===app.forum.attribute("allowCheckIn")){var t,o=app.current.get("routeName"),a=app.session.user.attribute("totalContinuousCheckIn"),n=app.session.user.attribute("canCheckin"),r=app.session.user.attribute("canCheckinContinuous"),s=(app.session.user.attribute("serverDate"),app.forum.attribute("forumCheckinSuccessPromptType")),i=app.session.user.attribute("checkInCompatibleExtensions"),p=(app.session.user.attribute("lastCheckinTime"),"forum-checkin");if("tag"===o&&-1!==i.indexOf("fof-follow-tags")&&(p="forum-checkin-1"),!0===n){t=app.translator.trans("ziven-checkin.forum.check-in"),e.add(p,c().component({icon:"fas fa-calendar",className:"Button CheckInButton--yellow",itemClassName:"App-primaryControl",id:"checkInButton",onclick:function(){app.session.user.save({canCheckin:!1,totalContinuousCheckIn:!0===r?a+1:1});var e=app.forum.attribute("forumCheckinSuccessPromptText"),t=app.forum.attribute("forumCheckinSuccessPromptRewardText");if(""!==e||""!==t)if(1===s){var o=app.forum.attribute("forumCheckinRewarMoney"),n=void 0!==app.forum.attribute("antoinefr-money.moneyname"),c="";if(""!==e){var i=e.replace("[days]",a);app.alerts.show(u(),{type:"success"},i)}if(!0===n&&""!==t){c=(app.forum.attribute("antoinefr-money.moneyname")||"[money]").replace("[money]",o);var p=t.replace("[reward]",c);app.alerts.show(u(),{type:"success"},p)}}else 2===s&&app.modal.show(f)}},t),50);var m=app.forum.attribute("forumAutoCheckin"),l=app.forum.attribute("forumAutoCheckinDelay");1===m&&setTimeout((function(){$("#checkInButton").click()}),l)}else t=a<=1?app.translator.trans("ziven-checkin.forum.checked-in-day",{count:a}):app.translator.trans("ziven-checkin.forum.checked-in-days",{count:a}),e.add(p,c().component({icon:"fas fa-calendar-check",className:"Button CheckInButton--green",itemClassName:"App-primaryControl",disabled:!0},t),50)}}))}))})(),module.exports=t})();
//# sourceMappingURL=forum.js.map